# 3. Babel

Babelì€ ES6 ì´í›„ì˜ ë¬¸ë²•ì„ ES5 ì´í•˜ì˜ ë¬¸ë²•ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬ì´ë‹¤.

## ì™œ Babelì„ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜?

ìµœê·¼ì—ëŠ” ëŒ€ë¶€ë¶„ì˜ ëª¨ë˜í•œ ë¸Œë¼ìš°ì €ì—ì„œ ES6 ì´í›„ì˜ ë¬¸ë²•ì„ ì§€ì›í•˜ì§€ë§Œ, 100%ì€ ì•„ë‹ˆë‹¤. ECMAScriptì˜ ë°œì „ ì†ë„ì™€ ë¸Œë¼ìš°ì €ì˜ ì§€ì› ì†ë„ëŠ” ë¹„ë¡€í•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë‹¤ì–‘í•œ ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ ë™ì‘í•˜ê¸° ìœ„í•´ì„œ íŠ¸ëœìŠ¤íŒŒì¼ë§ì€ í•„ìˆ˜ì´ë‹¤.

ë‹¨, ES5ì´í•˜ì˜ ë¬¸ë²•ìœ¼ë¡œ ë³€í™˜í•˜ë”ë¼ë„ Promise, async/awaitì™€ ê°™ì€ ë¬¸ë²•ì€ ë³€í™˜í•˜ì§€ ëª»í•œë‹¤. ì´ëŸ¬í•œ ì½”ë“œëŠ” **í´ë¦¬í•„**ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ë§Œ í•œë‹¤.

## Babelì˜ íŠ¹ì§• ğŸ‘€

-   Babelì˜ ë¹Œë“œ ê³¼ì •ì€ íŒŒì‹± -> ë³€í™˜ -> ì¶œë ¥ìœ¼ë¡œ ì§„í–‰ëœë‹¤.
-   Babelì€ íŒŒì‹±, ì¶œë ¥ë§Œ ë‹´ë‹¹í•œë‹¤.
-   **ë³€í™˜** ê³¼ì •ì€ **í”ŒëŸ¬ê·¸ì¸** í˜¹ì€ **í”„ë¦¬ì…‹**ì´ ë‹´ë‹¹í•œë‹¤.
    -   (1) í”ŒëŸ¬ê·¸ì¸ : ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ ë³€í™˜ì— ê´€ì—¬í•œë‹¤.
        -   Ex) `@babel/plugin-transform-arrow-functions`
    -   (2) í”„ë¦¬ì…‹ : ì—¬ëŸ¬ê°œì˜ í”ŒëŸ¬ê·¸ì¸ì´ ëª¨ì¸ ë‹¨ìœ„ì´ë‹¤.
        -   ì¶”ê°€ë˜ëŠ” ê¸°ëŠ¥ë³„ë¡œ í”ŒëŸ¬ê·¸ì¸ì„ ë§¤ë²ˆ ì¶”ê°€ í•˜ëŠ” ê²ƒì¸ ë²ˆê±°ë¡œìš´ ì¼.
        -   ê¸°ëŠ¥ ê°œë°œì— ë”°ë¼ ìì£¼ ì—…ë°ì´íŠ¸ ë˜ëŠ” í”„ë¦¬ì…‹ì„ ì‚¬ìš©í•˜ë©´ í¸í•˜ê²Œ ë³€í™˜ ê³¼ì •ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ
        -   Ex) `babel-preset-env`

## íŒ¨í‚¤ì§€ ì„¤ì¹˜

> npm i -D @babel/core @babel/cli @babel/preset-env core-js@3  
> npm i -D babel-loader  
> npm i -D @babel/plugin-transform-runtime @babel/runtime-corejs3

## .babelrc ì„¤ì •

### targets

íŠ¹ì • íƒ€ê¹ƒ ë¸Œë¼ìš°ì €ì— í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë§Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì´ë‹¤.

### useBuiltIns

**í´ë¦¬í•„** ì ìš© ë°©ë²•ì— ëŒ€í•œ ì˜µì…˜ì´ë‹¤.

-   usage/entry ì˜µì…˜ ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ `corejs` í”„ë¡œí¼í‹°ë¥¼ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤.

-   false(default) : í´ë¦¬í•„ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
-   usage : ì½”ë“œì—ì„œ í•„ìš”í•œ í´ë¦¬í•„ë§Œ ë¡œë“œ
-   entry : ì§ì ‘ core-js/stableê³¼ regenerator-runtime/runtime ëª¨ë“ˆì„ ì „ì—­ ìŠ¤ì½”í”„ì— ì‘ì„±ì´ ê°€ëŠ¥í•œ ê²½ìš°ì—ë§Œ..

```js
// .babelrc
{
	"presets": [
		[
			"@babel/preset-env",
			{
				"targets": {
					// ìµœê·¼ 2ê°œì˜ ë¸Œë¼ìš°ì € ë²„ì „ë§Œ í—ˆìš©
					// ie 10ë²„ì „ ì´í•˜ëŠ” ì œì™¸
					"browsers": ["last 2 versions", "not ie <= 10"]
				},
				"useBuiltIns": "usage",
				"corejs": 3
			}
		]
	]
}
```

### ë¬¸ì œ1 - ì „ì—­ ê°ì²´ì—ì„œ í´ë¦¬í•„ í•¨ìˆ˜ê°€ ì ‘ê·¼ ê°€ëŠ¥

![promise-polyfill](./promise-polyfill.PNG)

-   í•´ê²°: `@babel/plugin-transform-runtime`

-   í´ë¦¬í•„ì´ í•„ìš”í•œ ë¶€ë¶„ì„ ëŸ°íƒ€ì„ ì‹œì ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½ -> ì „ì—­ ì˜¤ì—¼ ë°©ì§€

### ë¬¸ì œ2 - ë²ˆë“¤ë§ í›„ arrow functionì´ ë³€í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤

-   í•´ê²° : webpack(> v5)ì˜ outputì˜ `environment` ì†ì„±ì„ ë¶€ì—¬í•´ì•¼ í•¨.  
    (ì´í›„ ì¶”ê°€ì ìœ¼ë¡œ ë¦¬ì„œì¹˜ í›„ ë‹¤ë¥¸ í•´ê²° ë°©ì•ˆ ì°¾ì•„ì•¼ê² ë‹¤.)

```js
// webpack.config.js
	output: {
		// ... ğŸ˜
		environment: {
			arrowFunction: false,
		},
	},
```

## ìµœì¢… ì„¤ì •

### .babelrc

```js
// .babelrc
{
	"presets": [
		[
			"@babel/preset-env",
			{
				"targets": {
					// ìµœê·¼ 2ê°œì˜ ë¸Œë¼ìš°ì € ë²„ì „ë§Œ í—ˆìš©
					// ie 10ë²„ì „ ì´í•˜ëŠ” ì œì™¸
					"browsers": ["last 2 versions", "not ie <= 10"]
				}
			}
		]
	],
	"plugins": [
		[
			"@babel/plugin-transform-runtime",
			{
				// https://babeljs.io/docs/en/babel-plugin-transform-runtime#corejs
				"corejs": 3,
				"proposals": true
			}
		]
	]
}

```

### webpack.config.js

```js
const path = require('path');

module.exports = {
	mode: 'none',
	entry: './src/index.js',
	output: {
		filename: 'bundle.js',
		path: path.resolve(__dirname, 'dist'),
		environment: {
			arrowFunction: false,
		},
	},
	module: {
		rules: [
			{
				test: /\.js$/,
				exclude: /node_modules/,
				use: {
					loader: 'babel-loader',
				},
			},
		],
	},
	resolve: {
		alias: {
			'@': path.resolve(__dirname, 'src'),
		},
		extensions: ['.js'],
	},
};
```

## Ref

-   https://royleej9.tistory.com/entry/babel-setting
-   https://jeonghwan-kim.github.io/series/2019/12/22/frontend-dev-env-babel.html
-   https://imch.dev/posts/babel-practice/
-   https://meetup.toast.com/posts/157
-   https://tech.kakao.com/2020/12/01/frontend-growth-02/
-   https://simsimjae.medium.com/%EA%B0%9C%EB%B0%9C%EC%9D%84-%ED%95%98%EB%8B%A4%EB%B3%B4%EB%8B%88-%EC%9D%B4%EB%9F%B0-%EC%97%90%EB%9F%AC%EA%B0%80-%EC%83%9D%EA%B2%A8%EC%84%9C-%EC%9B%90%EC%9D%B8%EC%9D%84-%EC%B0%BE%EB%8B%A4%EA%B0%80-%ED%8F%B4%EB%A6%AC%ED%95%84-%EB%AC%B8%EC%A0%9C%EB%9D%BC%EB%8A%94%EA%B1%B8-%EA%B9%A8%EB%8B%AB%EA%B3%A0-%EC%A0%95%EB%A6%AC%ED%95%A9%EB%8B%88%EB%8B%A4-217a207f8181
